$@MID@$: 68
Date: Thu, 11 Aug 2016 10:19:45 +0000
Author: kfeldman
S/N: Telepresence
Type: notes
Component: other
Subject: Telepresence HSN Issues
Cruise: at36
Attachment: 
Encoding: HTML
========================================
<p>&nbsp;<span style="font-family: Menlo; font-size: 11px;">Expanded Satellite Coverage for Atlantis/Alvin/Sentry cruise AT36</span></p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Cruise AT36 was a chief scientist training cruise with half the participants on shore,</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">utilizing telepresence capabilities to link the two groups of scientists as well as foster</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">outreach and media coverage.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">There were several obstacles along the path to full telepresence operations which took a</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">little time to sort out but in the end the telepresence effort was successful on both the</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">science collaboration and media/outreach aspects. &nbsp;A New York Times Science Facebook Live</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">event garnered over 35,000 active users during the event with over 65,000 views to date.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">The expanded service was set up through HiSeasNet and utilized the existing infrastructure</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">in place for regular HiSeasNet service, but with a larger satellite segment. &nbsp;Regular</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">HiSeasNet traffic flows from ship to satellite to an earth station at UCSD, then through a</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">GRE tunnel through the internet to WHOI so that the ship appears to be on campus at WHOI,</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">then from there traffic goes to wherever on the internet it is destined. &nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">For the telepresence a VPN tunnel was created between the telepresence equipment on</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Atlantis and the University of Rhode Island Inner Space Center (ISC).</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">At first there were problems with the Teledyne Q-Flex satellite modem that prevented</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">communications from ship to shore. &nbsp;These problems resulted in a new set of procedures</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">being developed when performing configuration changes on these modems fleet-wide.&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">The second problem was a performance issue somewhere in GRE tunnel between UCSD and WHOI.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">&nbsp;Performance was not acceptable for streaming video. &nbsp;We identified an old router as the</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">likely source. &nbsp;That was replaced but did not improve the condition. &nbsp;To work around this</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">problem routing at UCSD was altered to ensure that traffic from Atlantis to ISC did not</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">travel through the GRE tunnel to WHOI first. &nbsp;This allowed video streaming from ship to</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">shore.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Next there were problems with the satellite connection dropping on a regular basis. &nbsp;This</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">turned out to be due to three conditions. &nbsp;First there was a part within the radome on</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Atlantis that was intermittently failing. &nbsp;That part was replaced and the connection was</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">much improved. &nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">There were still some drops where the modem reported that the connection was solid but</p>
<div>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">details in the log file of the modem showed that in fact the signal was falling too low for</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">brief periods of time and thus was cutting out. &nbsp;Kevin, in consultation with the satellite</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">provider, was able to get the ok for Atlantis to increase power levels on 3 occasions, plus</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">we optimized some of the cabling on the ship to improve signal strength. &nbsp;This also helped</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">improve the connection.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">The third condition causing telepresence connections to drop was due to too much network</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">traffic overloading the capacity of the satellite connection. &nbsp;This caused delays in</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">transmitting data that were occasionally enough to cause the telepresence VPN tunnel to</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">shut down for brief periods. &nbsp;Various quality of service / traffic shaping options were</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">investigated. &nbsp;In the end manual monitoring of the traffic and judicious suspension of</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">non-telepresence traffic was enough to maintain steady communications for the high value</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">telepresence events.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">At some point after the bypass was implemented at the UCSD router, Eric discovered a very</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">old 10 Mbps interface in the path leading up to the WHOI router that had been replaced and</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">realized that the router was sending too much data to that old interface. &nbsp;He corrected</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">that condition and traffic through the GRE tunnel improved. &nbsp;The bypass at UCSD was kept in</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">place until the last day of the cruise since all was working well. &nbsp;We did verify that</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">performance was acceptable for telepresence through the GRE tunnel between UCSD and WHOI</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">as-is for this cruise, and operated the telepresence through the GRE tunnel successfully</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">for the last 12 hours of the cruise. &nbsp;The 10Mbps circuit should still be removed from the</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">GRE tunnel path at some point before the next telepresence event.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">A summary log of activities is below. &nbsp;More details are available in the HiSeasNet Slack</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">channel #rv-atlantis. &nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Summary of Activities by date</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160724 - Karl &amp; Kevin got satellite system switched over to expanded bandwith.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Shore talking, but no communication with the ship.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160725 - Karl, Kevin, Jon, Dave &nbsp;working on problem.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Ken joined at about 2100EDT</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Kevin could talk to ship satellite, ship could not see modem.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Verified problem is in modem interface.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160726 - Discovered that modem needs to save settings, load defaults, reload saved</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">settings, reboot&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">After that comms worked between ship and modem.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Got ISC VPN up and running. &nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">ship side is 128.128.252.9, shore side is 131.128.93.132</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Performance bad.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">UDP iperf tests showed 53% drop in packets to a server at UW.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">several similar tests to a WHOI server showed substantially similar results.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160727 - Verified full 7Mbps going through modem, received at UCSD, and pushed into WHOI</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">GRE tunnel</p>
</div>
<div>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">tried different ports for iperf, same results.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">tried iperf server on WHOI server, same results.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Proposed using some addresses from Endeavor to use the URI GRE tunnel from UCSD instead of</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">the WHOI GRE tunnel.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Added URI data server to mix of iperf servers to test against.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">A c2600 router was used as the WHOI end of the GRE tunnel and is old. &nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Eric tried to swap it out for a c2911router but was unsuccessful this day.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Laura tried swapping to an alternate interface on same router, no luck</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">tried to a backup router, but it was older and running older sw, so no go.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160728 - Eric tried rolling in the c2911 again and had BGP issues.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Ship sailed, lots of dropouts. &nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Connection is good when up, but drops frequently and down for random lengths of time.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160728-160731 lots of troubleshooting and analysis to characterize problems(s).</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160731 - Power cycled radome pedestal.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">No apparent help. &nbsp;Might have made things worse.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Ship modem power boost from -21 to -20.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Helped some, but not a lot.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Assigned IP addr to DAC, put it on network.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Tried adding Pilot Tones to the Sat carrier signals (both TX &amp; RX).</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Determined that modem often gives no indication of dropping Eb/No, but it is recorded in</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">the modem log.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">so at least some of the times there is a dropout it is because the signal has gotten too</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">low and PCMA unlock occurs.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Noticed that there are occasional but semi-frequent 0008 errors on the DAC. &nbsp;Details</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">relayed to Karl.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160801 - Turned pilot tones back off, as recommended by Teledyne personnel.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Determined we have a HW and a traffic problem. &nbsp;Karl suggested replacing the level cage.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Looked at QoS options on modem. &nbsp;Not possible without changes to c2900 config. &nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Looked at QoS options for Cisco and also for ftp (linux - iptables tagging &amp; tc)</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160802 - Ken and Robbie swapped out Seatel Level Cage and recalibrated during 4 hour port</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">stop.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Kevin changed ship modem TX clock source to receive reference.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Ship modem power boost from -20 to -19.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Ship modem power boost from -19 to -18.5.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160802-160805 - Signal much better and now staying up for hours at a time.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Still dropouts, but now only from too much data in shore -&gt; ship direction.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Looked at more QoS options, opted for manual approach at high usage times.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160805 - Pulled spectrum analyzer out of the loop so DAC signal goes directly to modem</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">rather than through a splitter first.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Composite power level went from -39 to -44,&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">RX level now at 54.55, higher than was, but not yet to thresh of -53</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Kevin pursued determining if the large broadcaster next to us was causing interference.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Ship modem power boost from -19 to -18.5.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160806 - Ran tests to determine if WHOI GRE tunnel can now support telepresence. &nbsp;Excerpt</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">from my email:</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Performed a number of two minute UDP iperf tests to a few servers as follows:</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">1) Tested to a URI server and saw 6.99 Mbps throughput to the server, dropping 50 out of</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">71430 packets (0.07%). &nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">2) Next tested to a server at WHOI and had 7.00 Mbps throughput with 0 packet loss.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">3) Just for good measure tested to a UW server and had 7.00 Mbps throughput, dropping 26</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">out of 71429 packets (0.036%)</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">3a) Kevin removed the bypass mapping on the UCSD router.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">4) Retested to the first URI server, this time through the GRE tunnel to WHOI and had 7.00</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Mbps throughput, dropping 2 out of 71429 &nbsp;packets (0.0028%).</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">The telepresence connections are currently up, streaming 2 video feeds at 1Mbps each</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">through the WHOI GRE tunnel to URI and all is working well. &nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">The 10Mbps circuit should still be removed from the GRE tunnel path at some point before</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">the next telepresence event. &nbsp;Even if that circuit remained in place I am confident that</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">performance should be acceptable for increased bandwidth similar to the current</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">configuration, as long as there are not overlapping increased bandwidth events on Atlantis</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">and Armstrong.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160807 - Transition ship to shore connection after arrival at WHOI dock.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Secured TX, end of satellite usage on ship at 1921 UTC.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">Secured TX from shore at 2359 UTC.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo;">160808 - Swap back to normal HSN frequencies.</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
<p style="margin: 0px; font-size: 11px; font-family: Menlo; min-height: 13px;">&nbsp;</p>
</div>
