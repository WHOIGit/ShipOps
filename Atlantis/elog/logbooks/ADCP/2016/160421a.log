$@MID@$: 13
Date: Thu, 21 Apr 2016 19:59:36 +0000
Author: AH - from Catie email
S/N: 
Type: Configuration
Category: General
Subject: ZMQ
Cruise: at33-04
Attachment: 
Encoding: HTML
========================================
<p><span style="font-size: medium;">Monitor window on ADCP - all items went completely red.&nbsp; Connections were checked, 1850 GPS feed (which remained red after checking connections and restarting data collection) was fixed via a technique described in email (included below).&nbsp; However, after a few hours, it happened again.</span></p>
<p><span style="font-size: medium;">Probable cause:&nbsp; vibration knocked the 1850 GPS feed out of the USB-serial device;&nbsp; USB-serial device has gone bad;&nbsp; Issue ith ZMQ<br />
</span></p>
<p><span style="font-size: medium;">Jules had Catie disable the ZMQ.&nbsp; Catie also </span><span style="font-size: medium;">USB-serial device and started a new cruise.</span></p>
<p><span style="font-size: medium;">RELEVANT EMAILS&nbsp; (21-April-2016)Catie<br />
</span></p>
<p><span style="font-size: medium;">Date: Thu, 21 Apr 2016 07:29:56 -1000<br />
From: UHDAS ADCP group &lt;uhdas@hawaii.edu&gt;<br />
To: atlantis sssg &lt;sssg@atlantis.whoi.edu&gt;<br />
Cc: uhdas@hawaii.edu, Laura Stolp &lt;laura@striker.whoi.edu&gt;, Frank Bahr &lt;fbahr@whoi.edu&gt;, lstolp@whoi.edu<br />
Subject: Re: ZMQ wrinkle<br />
<br />
Good.<br />
<br />
The only reason to have ZMQ enabled was in the case of a ship that<br />
rarely runs the ADCP, and you guys are great!&nbsp; so let's just leave<br />
it off for Atlantis.&nbsp; It's never been needed before, and it's just<br />
a complication in debugging.&nbsp; I'll make the appropriate change here.<br />
<br />
I can't see how ZMQ would make everything go red, so I still<br />
expect that to happen again at some point, but at least troubleshooting<br />
it will be more straightforward.<br />
<br />
Here's another idea: maybe the USB device isn't failing, but the power<br />
supply is.&nbsp; Do you have another power supply that would fit in that<br />
hole?&nbsp; If it comes down to replacing it, do you have a spare FTDI USB-serial<br />
logging device on board?&nbsp; That's the chipset which works; arbitrary 8-port<br />
devices will probably fail.<br />
<br />
Jules<br />
&nbsp;</span></p>
<p><span style="font-size: medium;"><br />
Let's disable ZMQ to remove that from the list of problems.<br />
Then we can wait to see whether everything turns red again.<br />
<br />
To disable ZMQ:<br />
<br />
(1) stop logging, kill the UHDAS GUI (no need to end cruise)<br />
(2) disable future ZMQ use:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - edit /home/adcp/config/sensor_cfg.py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - look for a line that says<br />
<br />
use_publishers = True<br />
<br />
# and replace it with<br />
<br />
<br />
use_publishers = False<br />
<br />
<br />
<br />
(3) reboot<br />
(4) start up UHDAS, start logging<br />
<br />
- all bars should be green<br />
- all ports should say &quot;ttyUSBx&quot; (not tcp://127.0.0.1:xxxx)<br />
<br />
If all bars are green, want an hour and force an UHDAS email (or<br />
do it with &quot;at&quot;)<br />
<br />
<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; daily.py --use_defaults<br />
<br />
<br />
and we can go from there.<br />
<br />
<br />
Jules</span></p>
<p><span style="font-size: medium;">On 4/21/16 12:52 AM, atlantis sssg wrote:<br />
&gt; Doh, spoke too soon I think. I just checked the ADCP this morning and we<br />
&gt; were all red again, with same scenario as yesterday. I'lll work today to<br />
&gt; see if I can figure out if I need to switch to currents2 or if maybe our<br />
&gt; little serial hub is dying.<br />
&gt; Catie<br />
&gt; <br />
&gt; On Thu, 21 Apr 2016, atlantis sssg wrote:<br />
&gt; <br />
&gt; &gt; Hi Jules-<br />
&gt; &gt; <br />
&gt; &gt; Thought I'd let you know I think this ZMQ wrinkle popped up again.<br />
&gt; &gt; <br />
&gt; &gt; Yesterday we had all of the items on the monitor screen go red.<br />
&gt; &gt; Without touching anything we stopped logging and then resumed logging,<br />
&gt; &gt; and everything came back green, except for our GPS2 feed (the<br />
&gt; &gt; tcp-127.0.0.1 one) Re-started UHDAS, still red. Checked that data<br />
&gt; &gt; really was coming in on the serial port, it was. Rebooted currents,<br />
&gt; &gt; still red. Started a new cruise, back to green.<br />
&gt; &gt; <br />
&gt; &gt; So this kind of just sounds like maybe the USB from the serial hub<br />
&gt; &gt; vibrated loose for a second or something, because no one was behind<br />
&gt; &gt; the racks messing with anything when it happened, and without any<br />
&gt; &gt; intervention it was (mostly) all reconnected.<br />
&gt; &gt; <br />
&gt; &gt; I gotcha-ed me for a few minutes, until I found this email from a few<br />
&gt; &gt; months back that tipped me off that maybe I needed to start a new cruise.<br />
&gt; &gt; <br />
&gt; &gt; Catie<br />
&gt; &gt; <br />
&gt; &gt; <br />
&gt; &gt; On Mon, 7 Dec 2015, UHDAS ADCP group wrote:<br />
&gt; &gt; <br />
&gt; &gt; &gt; Catie<br />
&gt; &gt; &gt; <br />
&gt; &gt; &gt; When tcp-127.0.0.1 is involved, there is a new drill if switching<br />
&gt; &gt; &gt; to a computer that did not have the USB device attached.<br />
&gt; &gt; &gt; <br />
&gt; &gt; &gt; formula:<br />
&gt; &gt; &gt; <br />
&gt; &gt; &gt; - attach the USB-serial device to the computer you want to use<br />
&gt; &gt; &gt; - reboot it<br />
&gt; &gt; &gt; - then start the UHDAS Gui, start a new cruise, and start logging<br />
&gt; &gt; &gt; - probably it is a good practice to start a new cruise under<br />
&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp; these circumstances<br />
&gt; &gt; &gt; <br />
&gt; &gt; &gt; It's a gotcha, but a rare one.&nbsp; The formula will always be OK, whether<br />
&gt; &gt; &gt; we are using ZMQ or not.&nbsp; I'm sorry about the wrinkle.<br />
&gt; &gt; &gt; <br />
&gt; &gt; &gt; Jules<br />
&nbsp; OLDER EMAIL TRAIL CONTINUES ...:</span></p>
<p><span style="font-size: medium;">&nbsp;</span></p>
