$@MID@$: 19
Date: Wed, 16 Nov 2011 12:01:24 +0000
Author: AH
System: 
Type: Configuration
Category: Hardware
S/N: 
Subject / Summary: CNAV feed changed to RS-422 coming down from Chartroom
Cruise: at18-13
Attachment: 
Encoding: HTML
========================================
<p>CNAV feed changed to RS-422 coming down from Chartroom</p>
<p>Some email snippets below describing why the change was made.</p>
<p>&gt; I have been pursuing means of taking care of the errors we keep getting on the em122 (Mike, I've<br />
included you here, as the possible solution I've found effects a few things in the chartroom).<br />
&gt; <br />
&gt; The errors I am referring to are of four types:<br />
&gt; <br />
&gt; 1)&nbsp; Time difference (PU-ZDA) too big.<br />
&gt; 2)&nbsp; (PU Sensor)&nbsp; GGA on PU port COM1 is missing.<br />
&gt; 3)&nbsp; (PU sensor) ZDA Clock on PU port COM1 is missing.<br />
&gt; 4)&nbsp; (PU Sensor) Echo Sounder EM122-118 Position input is missing during<br />
&gt;&nbsp;&nbsp;&nbsp; logging.<br />
&gt; <br />
&gt; I took a look at the numbers of messages we've been receiving of these types, and over what time<br />
period.&nbsp; It looks like this:<br />
&gt; Nov 3&nbsp;&nbsp;&nbsp; 00:00-22:46 continually&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 179 messages total<br />
&gt; Nov 4&nbsp;&nbsp; 03:56-23:33 continually&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 324 messages total<br />
&gt; Nov 5&nbsp;&nbsp;&nbsp; 01:38-23:51 continually&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1333 messages total<br />
&gt; Nov 6&nbsp;&nbsp; continually&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 514 messages total<br />
&gt; Nov 7&nbsp;&nbsp;&nbsp; 00:00-23:50 continually&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 469 messages total<br />
&gt; Nov 8&nbsp;&nbsp; 00:12-16:42 continually&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 155 messages total<br />
&gt; Nov 9&nbsp;&nbsp;&nbsp; 02:22-23:24 continually&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 290 messages total<br />
&gt; Nov 10&nbsp;&nbsp;&nbsp; 05:14-16:08 continually&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 370 messages total<br />
&gt; <br />
&gt; So, lots and lots of error/warning messages.&nbsp; There were some breaks in time when there were no<br />
messages at all, but they kept coming back, and the breaks were not very big.<br />
&gt; <br />
&gt; The signal has been coming down from the chartroom as an RS-232 signal at 9600 baud.&nbsp; I brought<br />
the signal down from the chartroom as a RS-422 signal all the way to the TRU, and then converted<br />
it to a 232 signal.&nbsp; I started out at 4800 baud, as the RS-422 signal come out of the CNAV port<br />
that also feeds both Phins systems, and it has been 4800 baud.&nbsp; This helped substantially,<br />
reducing the errors significantly.&nbsp; So, I got with the ComET and we changed each of our Phins over<br />
to 9600 baud and then I changed the multibeam to 9600 baud.&nbsp; I began recording data on Nov. 12 at<br />
17:17Z at this new baud rate.&nbsp; So far this is how my error numbers look:<br />
<br />
&gt; Nov 12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; No errors of any kind<br />
&gt; Nov 13&nbsp;&nbsp;&nbsp; 17:20-18:01 &amp; 20:16-20:56&nbsp; frequent errors during these time<br />
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; periods totalling 178 errors - no other errors<br />
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the rest of the day.&nbsp; No errors at all of type 1)<br />
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; above. Nov 14 00:00-13:00&nbsp;&nbsp;&nbsp; No errors at all so far of any kind<br />
&gt; <br />
&gt; My conclusion would be:<br />
&gt; 1)&nbsp;&nbsp;&nbsp; At least a substantial portion of our problem is coming from noise<br />
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; in the GPS feed<br />
&gt; 2)&nbsp;&nbsp;&nbsp; Bringing the signal down to the lab as RS-422 helps significantly<br />
&gt;&nbsp;&nbsp;&nbsp; in alleviating this noise issue<br />
&gt; 3)&nbsp;&nbsp;&nbsp; The previous errors that we were attributing to the 1 pps coming<br />
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from a different source then the ZDA are possibly actually related<br />
&gt;&nbsp;&nbsp;&nbsp; to these other errors - as so far they have disappeared completely<br />
&gt; <br />
&gt; Therefore, I would recommend that we make the following changes permanent:<br />
&gt; <br />
&gt; 1)&nbsp;&nbsp;&nbsp; CNAV feed to TRU as RS-422 at 9600 baud<br />
&gt; 2)&nbsp;&nbsp;&nbsp; CNAV feeds to ship and SSSG Phins at 9600 baud (as a consequence<br />
&gt;&nbsp;&nbsp;&nbsp; of #1 above<br />
&gt; 3)&nbsp;&nbsp;&nbsp; No automatic change-over to 1850 for Phins if CNAV goes out - this<br />
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; won't work as the 1850 does not have the capability of the 9600 baud<br />
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rate.&nbsp; It is also undesirable for the SSSG Phins as we need to<br />
&gt;&nbsp;&nbsp;&nbsp; know if the CNAV goes out so we can change our lever arms in the<br />
&gt;&nbsp;&nbsp;&nbsp; Phins, otherwise we will not be meeting the tolerances required<br />
&gt;&nbsp;&nbsp;&nbsp; by the em122 system.<br />
&gt; 4)&nbsp;&nbsp;&nbsp; If an even better idea comes up, we investigate/test that new idea<br />
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; during the transit back across the Atlantic.&nbsp; I am wanting to have<br />
&gt;&nbsp;&nbsp;&nbsp; everything working as well as possible during the next cruise, and<br />
&gt;&nbsp;&nbsp;&nbsp; we won't have enough time to test much prior to the cruise<br />
&gt;&nbsp;&nbsp;&nbsp; starting, since all testing really needs to be done at sea in this<br />
&gt;&nbsp;&nbsp;&nbsp; case.<br />
<br />
*********<br />
I'm a little confused as to why it has to change, since it's been working well for a while as it<br />
was. It sounds like one if two things is happening- either too many sentences were selected while<br />
running at the 4800 baud rate, or something else was selected wrong and it needed to be corrected.<br />
<br />
Running at the 9600 baud rate may solve the problem of too many sentences, but the next issue is<br />
the use of this port for other needs besides those spoken about. <br />
<br />
I'll ask that we take a look at this when I arrive, and I'll go over any issues that we find then<br />
in the meanwhile, send me a list of the ports and settings being used. <br />
<br />
One note, unless it's a special GPS, there are none that offer a baud rate any higher than 4800<br />
(as they are predicated to do so by NMEA 0183...)<br />
<br />
<br />
Mike <br />
<br />
mgagne@whoi.edu<br />
(508) 958-7100 (cell)<br />
**********************<br />
Mike,<br />
<br />
The problem is it has never been running well.&nbsp; We have always been getting these error messages<br />
since the new em122 installation.&nbsp; I already went through which sentences were selected (only the<br />
two we needed), etc. On this new set-up we actually have one extra string, but it is still working<br />
better.<br />
<br />
I'm afraid that in this case, my choices would be -<br />
1)&nbsp; change it back and leave the errors flying in<br />
2)&nbsp; leave it as it is right now.<br />
<br />
We will have no opportunity to test any changes done at the dock before the cruise.&nbsp; Therefore, I<br />
don't want to make any.&nbsp; There will be plenty of time for trying new things on the transit<br />
afterward.&nbsp; So, if we can not leave it this way, please let me know why, and I will change it<br />
back.&nbsp; I will do my best to explain to the scientists why we have to tolerate all of the errors.<br />
<br />
I would really like to leave it as is.&nbsp; I sort of don't understand why, when we have several ports<br />
on the CNAV, we absolutely have to have them all at 4800 baud?<br />
<br />
Allison<br />
<br />
&nbsp;</p>
