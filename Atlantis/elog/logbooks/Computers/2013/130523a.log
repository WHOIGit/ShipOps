$@MID@$: 57
Date: Thu, 23 May 2013 15:59:54 +0000
Author: lstolp
Type: Configuration
name: ftp
server type: web
OS: Linux
Location: Computer Lab
Category: Software
Subject: iptables update
Cruise: atpostal13
Attachment: 
Encoding: HTML
========================================
<p>Updated iptables per hdavis with following lines:</p>
<p># Added per hdavis 20130523&nbsp; for ESET<br />
-A FORWARD -d 192.168.12.2 -p tcp -m tcp --dport 2221 -j ACCEPT<br />
-A FORWARD -d 192.168.12.2 -p tcp -m tcp --dport 2222 -j ACCEPT<br />
-A FORWARD -d 192.168.12.2 -p tcp -m tcp --dport 2223 -j ACCEPT<br />
-A FORWARD -d 192.168.12.2 -p tcp -m tcp --dport 2224 -j ACCEPT<br />
-A FORWARD -s 192.168.12.2 -p tcp -m tcp --dport 2221 -j ACCEPT<br />
-A FORWARD -s 192.168.12.2 -p tcp -m tcp --dport 2222 -j ACCEPT<br />
-A FORWARD -s 192.168.12.2 -p tcp -m tcp --dport 2223 -j ACCEPT<br />
-A FORWARD -s 192.168.12.2 -p tcp -m tcp --dport 2224 -j ACCEPT<br />
&nbsp;</p>
<p>* checked all iptables and they are the same.. iptables.rules.nosquid still has comet pc and engineroompc in browsers these were not in any of the others..</p>
<p>[root@ftp etc]# ls -la iptable*<br />
-rw-r--r-- 1 root root 18472 2013-05-23 15:40 iptables.rules.nosquid<br />
-rw-r--r-- 1 root root 20837 2013-05-23 15:36 iptables.rules.restricted_browsing<br />
-rw-r--r-- 1 root root 19825 2013-05-23 15:42 iptables.rules.shoremode.withsquid<br />
-rw-r--r-- 1 root root 20080 2013-05-23 15:34 iptables.rules.withsquid<br />
&nbsp;</p>
<p>The iptables are read by the programs in /home/sssg/bin</p>
<p>[root@ftp bin]# ls -ls iptables.*<br />
4 -rwxr-xr-x 1 sssg sssg&nbsp; 71 2010-10-10 21:12 iptables.nosquid<br />
4 -rwxr-xr-x 1 sssg sssg&nbsp; 83 2011-09-26 04:33 iptables.restricted_browsing<br />
4 -rwxr-xr-x 1 sssg sssg&nbsp; 83 2013-03-04 16:39 iptables.shoremode<br />
4 -rwxr-xr-x 1 sssg sssg 170 2010-09-07 21:21 iptables.stop<br />
4 -rwxr-xr-x 1 sssg sssg&nbsp; 73 2012-02-03 18:01 iptables.withsquid<br />
&nbsp;</p>
<p>&nbsp;</p>
<p>The iptables.shoremode, reads /etc/iptables.rules.shoremode.withsquid&nbsp; and sends all the 192.168.0.0 networks to the browser rule for internet access.. This needs to be fun with squid. The squid configs are:</p>
<p>/usr/local/squid/etc</p>
<p>[root@ftp etc]# ls -la squid.conf*<br />
lrwxrwxrwx 1 root root&nbsp;&nbsp; 16 2013-05-23 15:50 squid.conf -&gt; squid.conf.shore<br />
-rw-r--r-- 1 root root 6743 2013-05-20 22:52 squid.conf.atsea<br />
-rw-r--r-- 1 root root 6585 2013-05-23 15:49 squid.conf.shore</p>
<p>I created a second squid.conf (squid.conf.shore) that takes out all the 'slowing' down of the link.. </p>
<p>&nbsp;</p>
<p><br />
~&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </p>
